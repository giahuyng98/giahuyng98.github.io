<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style id="typography.js">html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{background-color:transparent;-webkit-text-decoration-skip:objects}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font:100%/1.75 'Merriweather','Georgia',serif;box-sizing:border-box;overflow-y:scroll;}*{box-sizing:inherit;}*:before{box-sizing:inherit;}*:after{box-sizing:inherit;}body{color:hsla(0,0%,0%,0.9);font-family:'Merriweather','Georgia',serif;font-weight:400;word-wrap:break-word;font-kerning:normal;-moz-font-feature-settings:"kern", "liga", "clig", "calt";-ms-font-feature-settings:"kern", "liga", "clig", "calt";-webkit-font-feature-settings:"kern", "liga", "clig", "calt";font-feature-settings:"kern", "liga", "clig", "calt";}img{max-width:100%;margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}h1{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:Montserrat,sans-serif;font-weight:900;text-rendering:optimizeLegibility;font-size:2.5rem;line-height:1.1;}h2{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:1.73286rem;line-height:1.1;}h3{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:1.4427rem;line-height:1.1;}h4{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:1rem;line-height:1.1;letter-spacing:0.140625em;text-transform:uppercase;}h5{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:0.83255rem;line-height:1.1;}h6{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:0.75966rem;line-height:1.1;font-style:italic;}hgroup{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}ul{margin-left:1.75rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;list-style-position:outside;list-style-image:none;list-style:disc;}ol{margin-left:1.75rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;list-style-position:outside;list-style-image:none;}dl{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}dd{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}p{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}figure{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}pre{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;font-size:0.85rem;line-height:1.75rem;}table{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;font-size:1rem;line-height:1.75rem;border-collapse:collapse;width:100%;}fieldset{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}blockquote{margin-left:-1.75rem;margin-right:1.75rem;margin-top:0;padding-bottom:0;padding-left:1.42188rem;padding-right:0;padding-top:0;margin-bottom:1.75rem;font-size:1.20112rem;line-height:1.75rem;color:hsla(0,0%,0%,0.59);font-style:italic;border-left:0.32813rem solid hsla(0,0%,0%,0.9);}form{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}noscript{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}iframe{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}hr{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:calc(1.75rem - 1px);background:hsla(0,0%,0%,0.2);border:none;height:1px;}address{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}b{font-weight:700;}strong{font-weight:700;}dt{font-weight:700;}th{font-weight:700;}li{margin-bottom:calc(1.75rem / 2);}ol li{padding-left:0;}ul li{padding-left:0;}li > ol{margin-left:1.75rem;margin-bottom:calc(1.75rem / 2);margin-top:calc(1.75rem / 2);}li > ul{margin-left:1.75rem;margin-bottom:calc(1.75rem / 2);margin-top:calc(1.75rem / 2);}blockquote *:last-child{margin-bottom:0;}li *:last-child{margin-bottom:0;}p *:last-child{margin-bottom:0;}li > p{margin-bottom:calc(1.75rem / 2);}code{font-size:0.85rem;line-height:1.75rem;}kbd{font-size:0.85rem;line-height:1.75rem;}samp{font-size:0.85rem;line-height:1.75rem;}abbr{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}acronym{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}abbr[title]{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;text-decoration:none;}thead{text-align:left;}td,th{text-align:left;border-bottom:1px solid hsla(0,0%,0%,0.12);font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";padding-left:1.16667rem;padding-right:1.16667rem;padding-top:0.875rem;padding-bottom:calc(0.875rem - 1px);}th:first-child,td:first-child{padding-left:0;}th:last-child,td:last-child{padding-right:0;}blockquote > :last-child{margin-bottom:0;}blockquote cite{font-size:1rem;line-height:1.75rem;color:hsla(0,0%,0%,0.9);font-weight:400;}blockquote cite:before{content:"— ";}ul,ol{margin-left:0;}@media only screen and (max-width:480px){ul,ol{margin-left:1.75rem;}blockquote{margin-left:-1.3125rem;margin-right:0;padding-left:0.98438rem;}}h1,h2,h3,h4,h5,h6{margin-top:3.5rem;}a{box-shadow:0 1px 0 0 currentColor;color:#007acc;text-decoration:none;}a:hover,a:active{box-shadow:none;}mark,ins{background:#007acc;color:white;padding:0.10938rem 0.21875rem;text-decoration:none;}a.gatsby-resp-image-link{box-shadow:none;}</style><style data-href="/styles.491a16106869c73de5f8.css" id="gatsby-global-css">@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:100;src:local("Montserrat Thin "),local("Montserrat-Thin"),url(/static/montserrat-latin-100-191cc9f50f3b76b9617cb383f19acb7d.woff2) format("woff2"),url(/static/montserrat-latin-100-370318464551d5f25b0f0a78f374faac.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:100;src:local("Montserrat Thin italic"),local("Montserrat-Thinitalic"),url(/static/montserrat-latin-100italic-bdeaeb79db315697bd173a55b097dc18.woff2) format("woff2"),url(/static/montserrat-latin-100italic-ecf7d49386e8f265878e735db34a7c4b.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:200;src:local("Montserrat Extra Light "),local("Montserrat-Extra Light"),url(/static/montserrat-latin-200-85d5ef9db7f2dc6979172a4a3b2c57cb.woff2) format("woff2"),url(/static/montserrat-latin-200-1fc98e126a3d152549240e6244d7e669.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:200;src:local("Montserrat Extra Light italic"),local("Montserrat-Extra Lightitalic"),url(/static/montserrat-latin-200italic-49095760a498d024fe1a85a078850df9.woff2) format("woff2"),url(/static/montserrat-latin-200italic-fe46cf8b9462c820457d3bf537e4057f.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:300;src:local("Montserrat Light "),local("Montserrat-Light"),url(/static/montserrat-latin-300-7c3daf12b706645b5d3710f863a4da04.woff2) format("woff2"),url(/static/montserrat-latin-300-8dc95fab9cf98d02ca8d76e97d3dff60.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:300;src:local("Montserrat Light italic"),local("Montserrat-Lightitalic"),url(/static/montserrat-latin-300italic-f20b178ca2024a5eac8e42e6649db86c.woff2) format("woff2"),url(/static/montserrat-latin-300italic-3fe16939288856e8e828fa2661bf2354.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:400;src:local("Montserrat Regular "),local("Montserrat-Regular"),url(/static/montserrat-latin-400-bc3aa95dca08f5fee5291e34959c27bc.woff2) format("woff2"),url(/static/montserrat-latin-400-8102c4838f9e3d08dad644290a9cb701.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:400;src:local("Montserrat Regular italic"),local("Montserrat-Regularitalic"),url(/static/montserrat-latin-400italic-5cad650422a7184467af5a4d17b264c4.woff2) format("woff2"),url(/static/montserrat-latin-400italic-d191f22af3bb50902b99ac577f81a322.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:500;src:local("Montserrat Medium "),local("Montserrat-Medium"),url(/static/montserrat-latin-500-92d16e458625f4d2c8940f6bdca0ff09.woff2) format("woff2"),url(/static/montserrat-latin-500-8b763220218ffc11c57c84ddb80e7b26.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:500;src:local("Montserrat Medium italic"),local("Montserrat-Mediumitalic"),url(/static/montserrat-latin-500italic-47bfcca6b69d6a9acca7a8bff17193e2.woff2) format("woff2"),url(/static/montserrat-latin-500italic-72c01f753c3940c0b9cb6bf2389caddf.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:600;src:local("Montserrat SemiBold "),local("Montserrat-SemiBold"),url(/static/montserrat-latin-600-6fb1b5623e528e27c18658fecf5ee0ee.woff2) format("woff2"),url(/static/montserrat-latin-600-7c839d15a6f54e7025ba8c0c4b333e8f.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:600;src:local("Montserrat SemiBold italic"),local("Montserrat-SemiBolditalic"),url(/static/montserrat-latin-600italic-60789af1c9338ed1a9546722ec54b4f7.woff2) format("woff2"),url(/static/montserrat-latin-600italic-f3d4de8d0afb19e777c79032ce828e3d.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:700;src:local("Montserrat Bold "),local("Montserrat-Bold"),url(/static/montserrat-latin-700-39d93cf678c740f9f6b2b1cfde34bee3.woff2) format("woff2"),url(/static/montserrat-latin-700-80f10bd382f0df1cd650fec59f3c9394.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:700;src:local("Montserrat Bold italic"),local("Montserrat-Bolditalic"),url(/static/montserrat-latin-700italic-ba136d97b14e82284dd595e257f11c47.woff2) format("woff2"),url(/static/montserrat-latin-700italic-8c98142b425630821139c24bd1698700.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:800;src:local("Montserrat ExtraBold "),local("Montserrat-ExtraBold"),url(/static/montserrat-latin-800-b7018be9ed6cd94da8b6675b3a468c3b.woff2) format("woff2"),url(/static/montserrat-latin-800-9a9befcf50d64f9d2d19d8b1d1984add.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:800;src:local("Montserrat ExtraBold italic"),local("Montserrat-ExtraBolditalic"),url(/static/montserrat-latin-800italic-540ffdd223d1a9ad3d4e678e1a23372e.woff2) format("woff2"),url(/static/montserrat-latin-800italic-897086f99f4e1f45e6b1e9368527d0bc.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:900;src:local("Montserrat Black "),local("Montserrat-Black"),url(/static/montserrat-latin-900-58cd789700850375b834e8b6776002eb.woff2) format("woff2"),url(/static/montserrat-latin-900-26d42c9428780e545a540bbb50c84bce.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:900;src:local("Montserrat Black italic"),local("Montserrat-Blackitalic"),url(/static/montserrat-latin-900italic-451157bc8861fe54f523b3669a3def71.woff2) format("woff2"),url(/static/montserrat-latin-900italic-a8ec4957e1c24f5793305763ad9845b3.woff) format("woff")}@font-face{font-family:Merriweather;font-style:normal;font-display:swap;font-weight:300;src:local("Merriweather Light "),local("Merriweather-Light"),url(/static/merriweather-latin-300-b1158cfcd4aacb9d8fb61625e37af46a.woff2) format("woff2"),url(/static/merriweather-latin-300-cc7de05e166e90320d7d896e0f72a19d.woff) format("woff")}@font-face{font-family:Merriweather;font-style:italic;font-display:swap;font-weight:300;src:local("Merriweather Light italic"),local("Merriweather-Lightitalic"),url(/static/merriweather-latin-300italic-8fe52a48089d6ebe46db0b8e7cc66263.woff2) format("woff2"),url(/static/merriweather-latin-300italic-e1331f5397c2a673f9d3765138debdb5.woff) format("woff")}@font-face{font-family:Merriweather;font-style:normal;font-display:swap;font-weight:400;src:local("Merriweather Regular "),local("Merriweather-Regular"),url(/static/merriweather-latin-400-8276fdb72ae8f4714d4e6eba704cc39f.woff2) format("woff2"),url(/static/merriweather-latin-400-69f09800f4f6479d06e44eba837df872.woff) format("woff")}@font-face{font-family:Merriweather;font-style:italic;font-display:swap;font-weight:400;src:local("Merriweather Regular italic"),local("Merriweather-Regularitalic"),url(/static/merriweather-latin-400italic-3a9be9ea9f7aa4af6de7307df21d9fc0.woff2) format("woff2"),url(/static/merriweather-latin-400italic-d76079ed7541a433a54f79316de086e9.woff) format("woff")}@font-face{font-family:Merriweather;font-style:normal;font-display:swap;font-weight:700;src:local("Merriweather Bold "),local("Merriweather-Bold"),url(/static/merriweather-latin-700-fa534be7ffa380e39a7f6e03bf9a5e03.woff2) format("woff2"),url(/static/merriweather-latin-700-ba56ea84b8084b7ff9677f50d3cd81bd.woff) format("woff")}@font-face{font-family:Merriweather;font-style:italic;font-display:swap;font-weight:700;src:local("Merriweather Bold italic"),local("Merriweather-Bolditalic"),url(/static/merriweather-latin-700italic-1ef5edaaa20ae53ea50399884c5e48c6.woff2) format("woff2"),url(/static/merriweather-latin-700italic-534bc9e7ce93c73d73426e46acd78092.woff) format("woff")}@font-face{font-family:Merriweather;font-style:normal;font-display:swap;font-weight:900;src:local("Merriweather Black "),local("Merriweather-Black"),url(/static/merriweather-latin-900-7528fb70e8a4a82c7305e72ff43ac25f.woff2) format("woff2"),url(/static/merriweather-latin-900-3799b6e2f5ed3fcccf9d7a708d7419fa.woff) format("woff")}@font-face{font-family:Merriweather;font-style:italic;font-display:swap;font-weight:900;src:local("Merriweather Black italic"),local("Merriweather-Blackitalic"),url(/static/merriweather-latin-900italic-e1b4d2aaa78e12ad84aaf8a56321e4c2.woff2) format("woff2"),url(/static/merriweather-latin-900italic-2ae22f731b3424e8dbb4b37f7ca6e708.woff) format("woff")}code[class*=language-],pre[class*=language-]{color:#000;background:none;text-shadow:0 1px #fff;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}code[class*=language-]::selection,code[class*=language-] ::selection,pre[class*=language-]::selection,pre[class*=language-] ::selection{text-shadow:none;background:#b3d4fc}@media print{code[class*=language-],pre[class*=language-]{text-shadow:none}}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:#f5f2f0}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#708090}.token.punctuation{color:#999}.token.namespace{opacity:.7}.token.boolean,.token.constant,.token.deleted,.token.number,.token.property,.token.symbol,.token.tag{color:#905}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#690}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url{color:#9a6e3a;background:hsla(0,0%,100%,.5)}.token.atrule,.token.attr-value,.token.keyword{color:#07a}.token.class-name,.token.function{color:#dd4a68}.token.important,.token.regex,.token.variable{color:#e90}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}</style><meta name="generator" content="Gatsby 2.32.9"/><link rel="alternate" type="application/rss+xml" href="/rss.xml"/><link rel="icon" href="/favicon-32x32.png?v=4a9773549091c227cd2eb82ccd9c5e3a"/><link rel="manifest" href="/manifest.webmanifest"/><meta name="theme-color" content="#663399"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=4a9773549091c227cd2eb82ccd9c5e3a"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=4a9773549091c227cd2eb82ccd9c5e3a"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=4a9773549091c227cd2eb82ccd9c5e3a"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=4a9773549091c227cd2eb82ccd9c5e3a"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=4a9773549091c227cd2eb82ccd9c5e3a"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=4a9773549091c227cd2eb82ccd9c5e3a"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=4a9773549091c227cd2eb82ccd9c5e3a"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=4a9773549091c227cd2eb82ccd9c5e3a"/><title data-react-helmet="true">Optimize MySQL | Blog</title><meta data-react-helmet="true" name="description" content="Basic MySQL optimization techniques"/><meta data-react-helmet="true" property="og:title" content="Optimize MySQL"/><meta data-react-helmet="true" property="og:description" content="Basic MySQL optimization techniques"/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:creator" content="giahuyng98"/><meta data-react-helmet="true" name="twitter:title" content="Optimize MySQL"/><meta data-react-helmet="true" name="twitter:description" content="Basic MySQL optimization techniques"/><link as="script" rel="preload" href="/webpack-runtime-16e88c09a417c9832080.js"/><link as="script" rel="preload" href="/framework-a445a942d18bd3dc90d1.js"/><link as="script" rel="preload" href="/styles-755093da0c07f4b49226.js"/><link as="script" rel="preload" href="/app-e07ecc30eb97bafa6fb1.js"/><link as="script" rel="preload" href="/commons-be32269c7f26ab447804.js"/><link as="script" rel="preload" href="/cd7d5f864fc9e15ed8adef086269b0aeff617554-ce31e3fac3fd950611db.js"/><link as="script" rel="preload" href="/component---src-templates-blog-post-js-6af847837d7e9b3c62a8.js"/><link as="fetch" rel="preload" href="/page-data/mysql/mysql/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/2103919173.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/2841359383.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div style="margin-left:auto;margin-right:auto;max-width:42rem;padding:2.625rem 1.3125rem"><header><h3 style="font-family:Montserrat, sans-serif;margin-top:0"><a style="box-shadow:none;color:inherit" href="/">Blog</a></h3></header><main><article><header><h1 style="margin-top:1.75rem;margin-bottom:0">Optimize MySQL</h1><p style="font-size:0.83255rem;line-height:1.75rem;display:block;margin-bottom:1.75rem">February 24, 2021</p></header><section><h2>MySQL Architecture</h2>
<p>[Clients] => [Connection/Thread handling, Parser, Cache, Optimizer] => [Storage engine]</p>
<ul>
<li>Each connection get a thread</li>
<li>Server caches threads</li>
<li>5.5 support thread pooling plugins</li>
<li>Queries => [parsed tree] => [optimize]</li>
<li>Queries => [cache] =></li>
<li>Concurrency: shared lock &#x26; exclusive locks/ read lock &#x26; write lock</li>
<li>Table lock: write locks have higher prority than read locks</li>
<li>Row lock: </li>
<li>alter table: mysql use its own lock, not storage engine</li>
<li>Multiversion Concurrency control</li>
<li>!= row locking</li>
<li>use row-level locking</li>
<li>work with read commited &#x26; repeatable read</li>
</ul>
<h2>Default order</h2>
<ul>
<li>FROM/JOIN</li>
<li>WHERE</li>
<li>GROUP BY</li>
<li>HAVING</li>
<li>WINDOW FUNCTION</li>
<li>SELECT</li>
<li>DISTINCT</li>
<li>UNION</li>
<li>ORDER BY</li>
<li>LIMIT/OFFSET</li>
</ul>
<h2>Optimize SELECT</h2>
<ul>
<li>Index</li>
<li>Isolate and tune part of the query</li>
<li>Minimize/avoid full table scan</li>
<li>ANALYZE TABLE</li>
<li>Tuning, indexing, configuration that are specific to the storage engine</li>
<li>Optimize single-query transactions for InnoDB</li>
<li>Avoid make queries too hard to understand</li>
<li>EXPLAIN</li>
<li>Size/properties cache</li>
<li>Deal with lock</li>
</ul>
<h2>WHERE</h2>
<ul>
<li>
<p>MySQL automatic optimize:</p>
<ul>
<li>Removal of unnecessary parentheses</li>
<li>Constant folding</li>
<li>Constant condition removal</li>
<li>Constant expressions used by indexes are evaluated only once</li>
<li><code class="language-text">COUNT(*)</code> on single table without WHERE return directly MyISAM, MEMORY</li>
<li>Early detection invalid constant expressions</li>
<li>HAVING is merged with WHERE if not using GROUP BY or aggeregate functions</li>
<li>Each table in join, a simple WHERE => a fast WHERE</li>
<li>Constant tables are read first: (0, 1) record/ WHERE on PRIMARY KEY, UNIQUE INDEX constant expression, NOT NULL</li>
<li>index may not be used over full-scan</li>
<li>in some case, my sql can read rows from the index-tree, not data file, (numeric index)</li>
</ul>
</li>
</ul>
<h2>InnoDB</h2>
<ul>
<li>ACID, MVCC</li>
<li>table space</li>
<li>index and data seperate files</li>
<li>clustered index</li>
<li><strong>secondary indexes contain the primary key column</strong></li>
<li>optimization: predictive read ahead, <strong>adaptive hash index</strong>, insert buffer</li>
<li>hot backup</li>
</ul>
<h2>Match against</h2>
<ul>
<li>match(column) against (‘str1,str2’)</li>
<li>match(column) against (‘str1,str2’ in natural language mode)</li>
<li>ft<em>min</em>word_len = 3</li>
<li>stop word</li>
</ul>
<h2>Optimizing schema</h2>
<ul>
<li>Smaller usually better</li>
<li>Simple is good</li>
<li>Avoid NULL if possible (exeptions: InnoDBstores NULL with a single bit)</li>
<li>computations generally use 64-bit BIGINT integers, even on 32-bit architectures</li>
<li>DECIMAL</li>
<li>[more…]</li>
</ul>
<h2>Index</h2>
<ul>
<li>InnoDB use B+Trees</li>
<li>
<p>Type of queries that can use B-tree index:</p>
<ul>
<li>Match full</li>
<li>Match a left most prefix</li>
<li>Match a range of value</li>
<li>Match part exactly - part range</li>
<li>Index only queries </li>
</ul>
</li>
<li>indexes help <code class="language-text">ORDER BY</code> clause</li>
<li>Hash indexes</li>
<li>MEMORY is the only engine that explicit support hash index</li>
<li>Collison resolve by linked list</li>
<li>Limitation…(can use for sorting, index only queries, partical matching, equality only comparisons, collison performance lookup and maintain)</li>
<li>InnoDB adaptive hash indexes</li>
<li><strong>Build own hash index</strong>: create separate column (use trigger, …)</li>
<li>CRC32(‘str’), FNV64()</li>
<li>Birthday paradox</li>
<li>Spatial (R-Tree) indexes</li>
<li>
<p>Fulltext indexes</p>
<ul>
<li>Stopwords</li>
<li>Stemming</li>
<li>Plurals</li>
<li>Boolean searching</li>
</ul>
</li>
<li>TokuDB use fractal tree indexes</li>
<li>ScaleDB use Patricia tries…</li>
<li>
<p>Indexes benefits</p>
<ul>
<li>Reduce amount of data the server has to examine</li>
<li>Help server avoid sorting and temporary tables</li>
<li>Turn random IO to sequential IO</li>
</ul>
</li>
</ul>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">- Quickly navigate
- Order, group by optimize
- Relative value close together
- Index store copy of a value -&gt; index only queries</code></pre></div>
<ul>
<li><strong>Three-star index</strong></li>
<li><strong>1 star</strong> if it place relevent row adjacent to each other</li>
<li><strong>2 star</strong> if its rows are sort in the order the query need</li>
<li><strong>3 star</strong> if it contains all the column needed for the query</li>
</ul>
<p>=> Small table: often more effective to read all the rows</p>
<p>=> Medium to large table: good to use</p>
<p>=> Enormous tables: may not good maintaince indexes, partitioning</p>
<ul>
<li><strong>use sumary table</strong></li>
<li>
<p>Indexing strategies</p>
<ul>
<li>Isolating the column (<code class="language-text">WHERE idx_col + 1 &lt; 100</code> => <code class="language-text">WHERE idx_col &lt; 100 - 1</code>)</li>
<li>Prefix Index: long enough to give good selective, short enough to save space, <em>Selectivity</em></li>
<li>Multicolumn indexes: index merging optimization</li>
<li>Place ordering: most selective column first less important than avoiding I/O and sorting</li>
<li>Correct order depends on the queries that will use the index</li>
</ul>
</li>
<li>Clustered indexes</li>
<li>
<p>Advantages: </p>
<ul>
<li>Related data close together.</li>
<li>Data access is fast</li>
<li>Queries that use covering indexes can use primary key values contained at the leaf nodes???</li>
</ul>
</li>
<li>
<p>Disavantages:</p>
<ul>
<li>Improve performance only on I/O-bound workload</li>
<li>Insert speed heavily on insertion order.</li>
<li>Update is expensive</li>
<li>page splits: row must be placed into a page that is full of data</li>
<li>can be slower for full table scan: page split</li>
<li>Secondary (nonclustered) index can be large (contain primary key)</li>
<li>Secondary index accesses require 2 index lookup</li>
</ul>
</li>
<li>MyISAM data layout: 1 Btree per 1 index, ref only</li>
<li>InnoDB data layout: Clustered, Node{PK, TranID, Rollback Pointer, Columns…}, leaf node secondary index contain primary key</li>
<li>Inserting rows in primary key order with InnoDB: mostly benefic but for high concurrency workloads suffer from hot spot primary insert lock,
AUTO<em>INCREMENT innodb</em>autoinc<em>lock</em>mode,</li>
<li>
<p>Covering indexes</p>
<ul>
<li>An index that contains (covers) all the data needed to satisfy query is called a covering index</li>
</ul>
</li>
</ul>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">EXPLAIN SELECT * FROM products WHERE actor=&#39;SEAN CARREY&#39; AND title like &#39;%APOLLO%&#39;\G
- Index can&#39;t cover this query: 1-select * but index (actor, title), 2-mysql can&#39;t perform LIKE operation in the index, leading wildcard
EXPLAIN SELECT *  FROM products    JOIN (    SELECT prod_id    FROM products    WHERE actor=&#39;SEAN CARREY&#39; AND title LIKE &#39;%APOLLO%&#39;    ) AS t1 ON (t1.prod_id=products.prod_id)\G</code></pre></div>
<p>** indexcondition pushdown mysql 5.6</p>
<ul>
<li>
<p>Using Index Scans for Sorts</p>
<ul>
<li>Mysql has 2 ways to produce ordered results: 1-sort operator, 2-index (EXPLAIN type=index)</li>
<li>Scan index is fast, but if it’s not an covering index => random I/O</li>
<li>Ordering work only when the index’s order is exactly the same as the ORDER BY</li>
<li>And in multiple join table ORDER BY colums in the first table</li>
</ul>
</li>
<li>
<p>Packed (Prefix compressed) indexes</p>
<ul>
<li>Used by MyISAM</li>
<li>Allow more index to fit in memory</li>
<li>Pack string (even integer)</li>
<li>Store 1 full lenght + others suffix</li>
<li>Can’t use binary search, sequencial scaning only</li>
<li>1/10 size of the disk</li>
<li>PACK_KEYS</li>
</ul>
</li>
<li>
<p>Duplicate indexes, redundant indexes</p>
<ul>
<li>Duplicate indexes should be remove</li>
<li>Redundant indexes may be need for performance reasons.</li>
<li>In most cases should extend existing indexes</li>
<li>Identify Duplicate/Redundant indexes => 1-INFORMATION_SCHEMA, 2-common-schema framework, 3-pt-duplicate-key-checker</li>
<li>index (A, ID) =>  WHERE A = 5 ORDER BY ID</li>
<li>index (A, B, ID) => not so good => filesort</li>
</ul>
</li>
<li>
<p>Unused indexes</p>
<ul>
<li>INFORMATION<em>SCHEMA.INDEX</em>STATISTICS</li>
<li>Tooling</li>
</ul>
</li>
<li>
<p>Indexes and locking</p>
<ul>
<li>Indexes permit queries to lock fewer rows</li>
<li>But this only works if InnoDB can filter out the undesired rows at <em>the storage engine level</em></li>
</ul>
</li>
</ul>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">EXPLAIN SELECT actor_id FROM sakila.actor 
WHERE actor_id &lt; 5 AND actor_id &lt;&gt; 1 FOR UPDATE;

lock actor_id 1 =&gt; 5</code></pre></div>
<ul>
<li>can be worse when InnoDB can’t use index to find and lock a row, full table scan => locks every row</li>
<li>Case study</li>
</ul>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">we need to design an online dating site with user profiles that have manydifferent columns, such as 
the user’s country, state/region, city, sex, age, eye color, andso on. 
The site must support searching the profiles by various combinations of theseproperties. 
It must also let the user sort and limit results by the last time the profile’sowner was online, 
ratings from other members, etc. How do we design indexes for suchcomplex requirements?</code></pre></div>
<ul>
<li>Index base sorting OR post retrieval sorting</li>
<li>
<p>Support many kind of filtering</p>
<ul>
<li>Columns have many distinct values VS columns appear most often in WHERE clause</li>
<li>(sex, country): 1-sex appear almost every queries, 2- <code class="language-text">AND SEX IN(&#39;m&#39;, &#39;f&#39;)</code></li>
<li>Combine indexes </li>
<li>Range index shoule be at the end of composite index, or IN (a,b,c,d…)</li>
</ul>
</li>
<li>
<p>Avoid multiple range conditions</p>
<ul>
<li>IN()</li>
<li>Precompute column last_active => active{0, 1}</li>
<li>Separate indexes</li>
</ul>
</li>
<li>
<p>Optimize sort</p>
<ul>
<li>index on (sex, rating)</li>
<li>SELECT<cols>FROM profiles WHERE sex=‘M’ ORDER BY rating LIMIT 10;</li>
<li>Slow SELECT<cols>FROM profiles WHERE sex=‘M’ ORDER BY rating LIMIT 100000, 10;</li>
<li>=> denormalizing, precomputing, caching</li>
<li>Deferred join:</li>
</ul>
</li>
</ul>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">SELECT&lt;cols&gt;FROM profiles INNER JOIN (    
  SELECT&lt;primary key cols&gt;FROM profiles 
  WHERE x.sex=&#39;M&#39; ORDER BY rating LIMIT 100000, 10 
) AS x USING(&lt;primary key cols&gt;);</code></pre></div>
<h3>Index and Table Maintenance</h3>
<ul>
<li>
<p>Finding and Repairing Table Corruption</p>
<ul>
<li><code class="language-text">CHECK TABLE</code></li>
<li><code class="language-text">ALTER TABLE innodb_tbl ENGINE=INNODB</code></li>
<li><code class="language-text">myi-samchk</code></li>
<li><code class="language-text">innodb_force_recovery</code></li>
<li><code class="language-text">Percona InnoDB Data Recovery Toolkit</code></li>
</ul>
</li>
<li>
<p>Updating Index Statistics</p>
<ul>
<li><code class="language-text">records_in_range()</code>:  returns the number of records in that range</li>
<li><code class="language-text">info()</code>: return various types of data, including indexcardinality (approximately how many records there are for each key value)</li>
<li>Cost base optimizer, statistics ANALYZE TABLE</li>
<li><code class="language-text">SHOW INDEX FROM tbl</code></li>
</ul>
</li>
<li>Reducing Index and Data Fragmentation</li>
<li>Sumary
`</li>
<li>Single-row access is slow, especially on spindle-based storage. (Solid-state disksare faster at random I/O, but this point remains true.)
If the server reads a blockof data from storage and then accesses only one row in it, it wastes a lot of work.It’s much better to read in a
block that contains lots of rows you need. Use indexesto create locality of reference for improved efficiency.</li>
<li>Accessing ranges of rows in order is fast, for two reasons. First, sequential I/Odoesn’t require disk seeks, so it is faster than random I/O,
especially on spindle-based storage. Secondly, if the server can read the data in the order you need it, itdoesn’t need to perform any follow-up
work to sort it, and GROUP BY queries don’tneed to sort and group rows together to compute aggregates over them.</li>
<li>Index-only access is fast. If an index contains all the columns that the query needs,the storage engine doesn’t need to find the other columns
by looking up rows inthe table. This avoids lots of single-row access, which as we know from point 1above is slow.
`</li>
</ul>
<h2>Optimizing select</h2>
<ul>
<li>Only asking for what you really need (rows, cols), unless you know what you are doing, and becareful with repeated fetch</li>
<li>Response time</li>
<li>Rows examined</li>
<li>Rows returned</li>
<li>
<p>Rows examined: WHERE clause can apply 3 ways from best to worst</p>
<ul>
<li>Index lookup to eliminate non matching rows, storage engine layer</li>
<li>Use a covering index <code class="language-text">Extra: Using Index</code> to avoid row accesses and filter out non matching rows, server layer</li>
<li>Retrieve -> filter rows , server layer</li>
<li><code class="language-text">SELECT actor_id, COUNT(*) FROM sakila.film_actor GROUP BY actor_id;</code> An index can’t reduce the number of rows examined for a query like this one</li>
<li>If a huge number of rows were examined to produce relatively few rows in the result: 1-use covering indexes, 2-change the schema (sumary table), 3-Rewrite a complicate query</li>
</ul>
</li>
<li>Whether it’s preferable to break up a complexquery into several simpler queries</li>
<li>
<p>Chopping up a query</p>
<ul>
<li>From: <code class="language-text">DELETE FROM messages WHERE created &lt; DATE_SUB(NOW(),INTERVAL 3 MONTH);</code></li>
<li>To: </li>
</ul>
</li>
</ul>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">rows_affected = 0
do {
  rows_affected = do_query(&quot;DELETE FROM messages WHERE created &lt; DATE_SUB(NOW(),INTERVAL 3 MONTH) LIMIT 10000&quot;)
} while rows_affected &gt; 0</code></pre></div>
<ul>
<li>Join Decomposition</li>
</ul>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">SELECT * FROM tag 
JOIN tag_post ON tag_post.tag_id=tag.id
JOIN post ON tag_post.post_id=post.id
WHERE tag.tag=&#39;mysql&#39;;</code></pre></div>
<p>to:</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">SELECT * FROM  tag WHERE tag=&#39;mysql&#39;;
SELECT * FROM  tag_post WHERE tag_id=1234;
SELECT * FROM  post WHERE  post.id in (123,456,567,9098,8904);</code></pre></div>
<ul>
<li>
<p>performance advantages:</p>
<ul>
<li>caching can be more efficient. </li>
<li>executing the queries individually can sometimes reduce lock contention.</li>
<li>doing joins in the application makes it easier to scale the database by placing tables on different servers</li>
<li>the queries themselves can be more efficient. In this example,
using an IN() list instead of a join lets MySQL sort row IDs and retrieve rows more optimally than might be possible with a join</li>
<li>reduce redundant row accesses</li>
<li>manual hash join</li>
</ul>
</li>
<li>
<p>Query execution</p>
<ul>
<li>Client send sql statement</li>
<li>Server check cache, if hit return result</li>
<li>Server parses, preprocessing, and optimize the SQL into a query execition plan</li>
<li>Query execution engine executes the plan by making calls to the storage engine API</li>
<li>Server send server to the client</li>
</ul>
</li>
<li>
<p>Client/Server protocol</p>
<ul>
<li>half duplex: client (or server) must receive (or sent) all data before sent (or receive) new one, <code class="language-text">LIMIT</code></li>
<li><code class="language-text">max_allowed_packet</code></li>
<li>client fetchs all the result set and store in memory or fetchs invidiual row, important for server: locking, free resource…</li>
</ul>
</li>
<li>
<p>Query state</p>
<ul>
<li>Sleep</li>
<li>Query</li>
<li>Locked</li>
<li>Analyzing and statistics</li>
<li>Copying to tmp table [on disk]</li>
<li>Sorting result</li>
<li>Sending data: between states, or to the client</li>
</ul>
</li>
<li>Query cache: case sensitive hash lookup, => check privileges => return</li>
<li>
<p>Parser and preprocessor:</p>
<ul>
<li>Parser parse sql syntax => parse tree</li>
<li>Preprocessor check parse tree: table exists, column exists, alias…</li>
<li>Preprocessor check privileges</li>
</ul>
</li>
<li>
<p>Query optimizer</p>
<ul>
<li><code class="language-text">Last_query_cost</code></li>
<li>static/dynamic</li>
<li>types of optimization:</li>
<li>Reordering joins</li>
<li>Converting outer join to inner join</li>
<li>Applying algebraic equivalence rules</li>
<li>COUNT(), MIN(), MAX() optimizations</li>
<li>Evaluating and reducing constant expressions</li>
<li>Covering indexes</li>
<li>Subquery optimization</li>
<li>Early termination</li>
<li>Equality propagation</li>
<li><code class="language-text">IN()</code> list comparisons: mysql sorts the list => O(logn)</li>
<li>And many more…</li>
</ul>
</li>
<li>MySQL’s join execution strategy</li>
<li><strong>every query a join — not just every query that matches rows from two tables, but every query, period</strong></li>
</ul>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">SELECT tbl1.col1, tbl2.col2 
FROM tbl1 INNER JOIN tbl2 USING(col3) 
WHERE tbl1.col1 IN(5,6);</code></pre></div>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">outer_iter = iterator over tbl1 where col1 IN(5,6)
outer_row  = outer_iter.next
while outer_row   
  inner_iter = iterator over tbl2 where col3 = outer_row.col3   
  inner_row  = inner_iter.next   
  while inner_row      
    output [ outer_row.col1, inner_row.col2 ]      
    inner_row = inner_iter.next   
  end   
  outer_row = outer_iter.next
end</code></pre></div>
<ul>
<li>
<p>Execution plan</p>
<ul>
<li><code class="language-text">EXPLAIN EXTENDED</code> + <code class="language-text">SHOW WARINGS</code></li>
<li><code class="language-text">STRAIGHT_JOIN</code></li>
<li><code class="language-text">optimizer_search_depth</code> variable</li>
<li>n-factorial combinations of join orders to examine</li>
<li>MySQL has many heuristics, to speed up the optimization stage</li>
<li>Sometime queries can be reordered (LEFT JOIN, correlated sub queries), reduce search space</li>
</ul>
</li>
<li>
<p>Sort optimizations</p>
<ul>
<li>filesort: quick sort or quick sort + merge from disk if data won’t fit sort buffer</li>
<li>2 filesort algorithms:</li>
<li>Two passes: sort the pointer than read data</li>
<li>Single pass: read all column needed => sort => output <code class="language-text">max_length_for_sort_data</code></li>
<li>allocates fixed-size record for each tuple</li>
<li>sort a join: order by (cols from tb1) => sort then join <code class="language-text">Using filesort”</code> otherwise <code class="language-text">Using temporary; Using filesort</code></li>
<li>mysql 5.6 <code class="language-text">LIMIT</code> sort optimize</li>
</ul>
</li>
<li>
<p>The Query Execution Engine (QXE)</p>
<ul>
<li>optimizing state output query execution plan => QXE (data structure, not byte-code)</li>
<li>handler API</li>
</ul>
</li>
<li>
<p>Return data to the client</p>
<ul>
<li>If query is cacheable cache it</li>
<li>As soon as mysql processes the last table and generates 1 row => send data to client</li>
<li>Each row in the result set is sent in a separate packet mysql client/server protocol</li>
</ul>
</li>
<li>
<p>Subquery vs join</p>
<ul>
<li>GROUP_CONCAT</li>
<li>IN vs EXISTS</li>
<li>Measure</li>
<li>UNION LIMIT</li>
</ul>
</li>
<li>Index Merge Optimizations</li>
<li>Equality Propagation: e.g: IN list WHERE, ON, USING the optimizer will share the list by copying => can be slow</li>
<li>Parallel Execution: not support, 8.0.14 limited support</li>
<li>
<p>Hash joins:</p>
<ul>
<li>Mysql 5.6 not support only nested-loop join, support in MySql 8, mariadb 5.3, 5.5 support BNL, BNLH, BKA, BKAH.</li>
<li><code class="language-text">index condition pushdown</code> loose index scan</li>
<li><code class="language-text">MIN()</code> and <code class="language-text">MAX()</code> optimize: </li>
</ul>
</li>
</ul>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">SELECT MIN(actor_id) FROM sakila.actor WHERE first_name = &#39;PENELOPE&#39;; 
scan entire table</code></pre></div>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">SELECT actor_id FROM sakila.actor USE INDEX(PRIMARY) WHERE first_name = &#39;PENELOPE&#39; LIMIT 1;
fix</code></pre></div>
<ul>
<li>SELECT and UPDATE on the Same Table…</li>
<li>Query Optimizer Hints</li>
</ul>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">HIGH_PRIORITY and LOW_PRIORITY
DELAYED
STRAIGHT_JOIN
SQL_SMALL_RESULT and SQL_BIG_RESULT
SQL_BUFFER_RESULT
SQL_CACHE and SQL_NO_CACHE
SQL_CALC_FOUND_ROWS
FOR UPDATE and LOCK IN SHARE MODE
USE INDEX, IGNORE INDEX, and FORCE INDEX
optimizer_search_depth
optimizer_prune_level
optimizer_switch</code></pre></div>
<ul>
<li>optimizing count</li>
</ul>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">SELECT COUNT(*) FROM world.City WHERE ID &gt; 5;
to
SELECT (SELECT COUNT(*) FROM world.City) - COUNT(*)
FROM world.City WHERE ID &lt;= 5;

count multiple column
SELECT SUM(IF(color = &#39;blue&#39;, 1, 0)) AS blue,SUM(IF(color = &#39;red&#39;, 1, 0)) AS red FROM items
or 
SELECT COUNT(color = &#39;blue&#39; OR NULL) AS blue, COUNT(color = &#39;red&#39; OR NULL) AS red FROM items;
- using approximation
- covering index
- summary tables
- cache </code></pre></div>
<ul>
<li>optimizing join</li>
</ul>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">- ON, USING: use indexes
- GROUP BY, ORDER BY expression refers only to column from single table</code></pre></div>
<ul>
<li>optimizing subqueries</li>
</ul>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">- mysql &lt; 5.6 join wherever possible
- 5.6+ or mariadb measure it?</code></pre></div>
<ul>
<li>
<p>optimizing group by, distinct</p>
<ul>
<li>use indexes</li>
<li>when mysql can’t use indexes: 1-filesort, 2-temporary table</li>
<li>group by identifier rather than by the value (group join value from lookup table)</li>
</ul>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">SELECT actor.first_name, actor.last_name, COUNT(*)  
FROM sakila.film_actor    
INNER JOIN sakila.actor USING(actor_id)    
GROUP BY actor.first_name, actor.last_name;
to:
SELECT actor.first_name, actor.last_name, COUNT(*)    
FROM sakila.film_actor    
INNER JOIN sakila.actor USING(actor_id)    
GROUP BY film_actor.actor_id; // film.actor_id

about:
SELECT actor.first_name, actor.last_name, c.cnt    
FROM sakila.actor    
INNER JOIN (    
SELECT actor_id, COUNT(*) AS cnt    
FROM sakila.film_actor    
GROUP BY actor_id) AS c USING(actor_id) ;
creating and filling the temporary table required for the subquery maybe high compared to the cost of fudging pure relational theory a little bit</code></pre></div>
<p><strong>temporary table created by the subquery has no indexes</strong></p>
<ul>
<li>Optimizing GROUP BY WITH ROLLUP</li>
</ul>
</li>
<li>
<p>Optimizing LIMIT and OFFSET</p>
<ul>
<li>deferred join</li>
<li>precompute <code class="language-text">SELECT film_id, description FROM sakila.film    -&gt; WHERE position BETWEEN 50 AND 54 ORDER BY position;</code></li>
<li>If you use a sort of bookmark to remember the position of the last row you fetched,
you can generate the next set of rows by starting from that position instead of using an OFFSET</li>
</ul>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">SELECT * FROM sakila.rental    
ORDER BY rental_id DESC LIMIT 20;
return 16049 through 16030
=&gt;
SELECT * FROM sakila.rental    
WHERE rental_id &lt; 16030    
ORDER BY rental_id DESC LIMIT 20;</code></pre></div>
<ul>
<li>Use Sphinx</li>
</ul>
</li>
<li>
<p>Optimizing UNION</p>
<ul>
<li>MySQL always executes UNION queries by creating a temporary table and filling it withthe UNION results</li>
<li>always  use UNION  ALL,  unless  you  need  the  server  to  eliminateduplicate rows</li>
<li>the ALL keyword doesn’t eliminate the temporary table</li>
</ul>
</li>
</ul>
<p><em>Static Query Analysis</em>: Percona Toolkit </p>
<ul>
<li>Using User-Defined Variables</li>
</ul></section><hr style="margin-bottom:1.75rem"/><footer><div style="display:flex;margin-bottom:4.375rem"><div class=" gatsby-image-wrapper" style="position:relative;overflow:hidden;display:inline-block;width:50px;height:50px;margin-right:0.875rem;margin-bottom:0;min-width:50px;border-radius:100%"><img aria-hidden="true" src="data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAUABQDASIAAhEBAxEB/8QAGQABAQEAAwAAAAAAAAAAAAAAAAMCAQQF/8QAFwEAAwEAAAAAAAAAAAAAAAAAAQMEAv/aAAwDAQACEAMQAAABhD0aPRwgZP3Nk12xkf/EABsQAAIDAQEBAAAAAAAAAAAAAAECAAMREhAy/9oACAEBAAEFArDk5tSJnNedWDfFUCD6KKZ//8QAGBEAAwEBAAAAAAAAAAAAAAAAAAESAzH/2gAIAQMBAT8BzSkoXCUf/8QAGBEAAwEBAAAAAAAAAAAAAAAAAAEREDH/2gAIAQIBAT8BfSZWf//EABwQAAICAgMAAAAAAAAAAAAAAAARARASITFBsf/aAAgBAQAGPwLXZlPtQxK2cH//xAAaEAEAAgMBAAAAAAAAAAAAAAABABEhMVFB/9oACAEBAAE/IXAYMAvPdO0SD2aJfIAeVBLrBKGjMBb0aiFpuf/aAAwDAQACAAMAAAAQsAAC/8QAGREBAQADAQAAAAAAAAAAAAAAAQARIUFx/9oACAEDAQE/EHpT2AciGll4X//EABkRAQACAwAAAAAAAAAAAAAAAAEAEBEhYf/aAAgBAgEBPxBqCmXc7T//xAAdEAEBAQEAAQUAAAAAAAAAAAABEQAhMUFRcZGh/9oACAEBAAE/EF5qQQruyA+oR8ZX8izK4U2vZeZJcsw+/wAxE4B4MC+yFeucwypXXlm//9k=" alt="Gia Huy" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1;transition-delay:500ms;border-radius:50%"/><noscript><picture><source srcset="/static/661d1f7170d9fe3daa88a8ef76eff5c9/99438/profile-pic.jpg 1x,
/static/661d1f7170d9fe3daa88a8ef76eff5c9/aba1d/profile-pic.jpg 1.5x,
/static/661d1f7170d9fe3daa88a8ef76eff5c9/b315d/profile-pic.jpg 2x" /><img loading="lazy" width="50" height="50" srcset="/static/661d1f7170d9fe3daa88a8ef76eff5c9/99438/profile-pic.jpg 1x,
/static/661d1f7170d9fe3daa88a8ef76eff5c9/aba1d/profile-pic.jpg 1.5x,
/static/661d1f7170d9fe3daa88a8ef76eff5c9/b315d/profile-pic.jpg 2x" src="/static/661d1f7170d9fe3daa88a8ef76eff5c9/99438/profile-pic.jpg" alt="Gia Huy" style="position:absolute;top:0;left:0;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div></div></footer></article><nav><ul style="display:flex;flex-wrap:wrap;justify-content:space-between;list-style:none;padding:0"><li><a rel="prev" href="/todo/todo/">← <!-- -->TODO</a></li><li></li></ul></nav></main><footer>© <!-- -->2021<!-- -->, Built with<!-- --> <a href="https://www.gatsbyjs.org">Gatsby</a></footer></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/mysql/mysql/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-0eca59d2ee8c0828e3a6.js"],"app":["/app-e07ecc30eb97bafa6fb1.js"],"component---src-pages-404-js":["/component---src-pages-404-js-c6dd88492b94f90cf31b.js"],"component---src-pages-index-js":["/component---src-pages-index-js-fa85cf6ee42b1cf6941b.js"],"component---src-pages-using-typescript-tsx":["/component---src-pages-using-typescript-tsx-e106dbeb96d3d3ccefc8.js"],"component---src-templates-blog-post-js":["/component---src-templates-blog-post-js-6af847837d7e9b3c62a8.js"]};/*]]>*/</script><script src="/polyfill-0eca59d2ee8c0828e3a6.js" nomodule=""></script><script src="/component---src-templates-blog-post-js-6af847837d7e9b3c62a8.js" async=""></script><script src="/cd7d5f864fc9e15ed8adef086269b0aeff617554-ce31e3fac3fd950611db.js" async=""></script><script src="/commons-be32269c7f26ab447804.js" async=""></script><script src="/app-e07ecc30eb97bafa6fb1.js" async=""></script><script src="/styles-755093da0c07f4b49226.js" async=""></script><script src="/framework-a445a942d18bd3dc90d1.js" async=""></script><script src="/webpack-runtime-16e88c09a417c9832080.js" async=""></script></body></html>